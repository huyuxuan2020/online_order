{"ast":null,"code":"import _slicedToArray from\"/Users/huyuxuan/Desktop/laioffer/doordash-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Button,Drawer,List,message,Typography}from\"antd\";import{useEffect,useState}from\"react\";import{checkout,getCart}from\"../utils\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Text=Typography.Text;var MyCart=function MyCart(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),cartVisible=_useState2[0],setCartVisible=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),cartData=_useState4[0],setCartData=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),checking=_useState8[0],setChecking=_useState8[1];useEffect(function(){if(!cartVisible){return;}setLoading(true);getCart().then(function(data){setCartData(data);}).catch(function(err){message.error(err.message);}).finally(function(){setLoading(false);});},[cartVisible]);var onCheckOut=function onCheckOut(){setChecking(true);checkout().then(function(){message.success(\"Successfully checkout\");setCartVisible(false);}).catch(function(err){message.error(err.message);}).finally(function(){setChecking(false);});};var onCloseDrawer=function onCloseDrawer(){setCartVisible(false);};var onOpenDrawer=function onOpenDrawer(){setCartVisible(true);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{type:\"primary\",shape:\"round\",onClick:onOpenDrawer,children:\"Cart\"}),/*#__PURE__*/_jsx(Drawer,{title:\"My Shopping Cart\",onClose:onCloseDrawer,visible:cartVisible,width:520,footer:/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\"},children:[/*#__PURE__*/_jsx(Text,{strong:true,children:\"Total price: $\".concat(cartData===null||cartData===void 0?void 0:cartData.totalPrice)}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Button,{onClick:onCloseDrawer,style:{marginRight:8},children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:onCheckOut,type:\"primary\",loading:checking,disabled:loading||(cartData===null||cartData===void 0?void 0:cartData.orderItemList.length)===0,children:\"Checkout\"})]})]}),children:/*#__PURE__*/_jsx(List,{loading:loading,itemLayout:\"horizontal\",dataSource:cartData===null||cartData===void 0?void 0:cartData.orderItemList,renderItem:function renderItem(item){return/*#__PURE__*/_jsx(List.Item,{children:/*#__PURE__*/_jsx(List.Item.Meta,{title:item.menuItem.name,description:\"$\".concat(item.price)})});}})})]});};export default MyCart;","map":{"version":3,"sources":["/Users/huyuxuan/Desktop/laioffer/doordash-app/src/components/MyCart.js"],"names":["Button","Drawer","List","message","Typography","useEffect","useState","checkout","getCart","Text","MyCart","cartVisible","setCartVisible","cartData","setCartData","loading","setLoading","checking","setChecking","then","data","catch","err","error","finally","onCheckOut","success","onCloseDrawer","onOpenDrawer","display","justifyContent","totalPrice","marginRight","orderItemList","length","item","menuItem","name","price"],"mappings":"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","sourcesContent":["import { Button, Drawer, List, message, Typography } from \"antd\";\nimport { useEffect, useState } from \"react\";\nimport { checkout, getCart } from \"../utils\";\n\nconst { Text } = Typography;\n\nconst MyCart = () => {\n  const [cartVisible, setCartVisible] = useState(false);\n  const [cartData, setCartData] = useState();\n  const [loading, setLoading] = useState(false);\n  const [checking, setChecking] = useState(false);\n\n  useEffect(() => {\n    if (!cartVisible) {\n      return;\n    }\n\n    setLoading(true);\n    getCart()\n      .then((data) => {\n        setCartData(data);\n      })\n      .catch((err) => {\n        message.error(err.message);\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n  }, [cartVisible]);\n\n  const onCheckOut = () => {\n    setChecking(true);\n    checkout()\n      .then(() => {\n        message.success(\"Successfully checkout\");\n        setCartVisible(false);\n      })\n      .catch((err) => {\n        message.error(err.message);\n      })\n      .finally(() => {\n        setChecking(false);\n      });\n  };\n\n  const onCloseDrawer = () => {\n    setCartVisible(false);\n  };\n\n  const onOpenDrawer = () => {\n    setCartVisible(true);\n  };\n\n  return (\n    <>\n      <Button type=\"primary\" shape=\"round\" onClick={onOpenDrawer}>\n        Cart\n      </Button>\n      <Drawer\n        title=\"My Shopping Cart\"\n        onClose={onCloseDrawer}\n        visible={cartVisible}\n        width={520}\n        footer={\n          <div\n            style={{\n              display: \"flex\",\n              justifyContent: \"space-between\",\n            }}\n          >\n            <Text strong={true}>{`Total price: $${cartData?.totalPrice}`}</Text>\n            <div>\n              <Button onClick={onCloseDrawer} style={{ marginRight: 8 }}>\n                Cancel\n              </Button>\n              <Button\n                onClick={onCheckOut}\n                type=\"primary\"\n                loading={checking}\n                disabled={loading || cartData?.orderItemList.length === 0}\n              >\n                Checkout\n              </Button>\n            </div>\n          </div>\n        }\n      >\n        <List\n          loading={loading}\n          itemLayout=\"horizontal\"\n          dataSource={cartData?.orderItemList}\n          renderItem={(item) => (\n            <List.Item>\n              <List.Item.Meta\n                title={item.menuItem.name}\n                description={`$${item.price}`}\n              />\n            </List.Item>\n          )}\n        />\n      </Drawer>\n    </>\n  );\n};\n\nexport default MyCart;"]},"metadata":{},"sourceType":"module"}