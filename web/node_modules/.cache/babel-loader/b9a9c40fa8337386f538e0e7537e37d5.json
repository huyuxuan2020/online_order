{"ast":null,"code":"import _slicedToArray from\"/Users/huyuxuan/Desktop/laioffer/doordash-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Button,Card,List,message,Select,Tooltip}from\"antd\";import{useEffect,useState}from\"react\";import{addItemToCart,getMenus,getRestaurants}from\"../utils\";import{PlusOutlined}from\"@ant-design/icons\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Option=Select.Option;var AddToCartButton=function AddToCartButton(_ref){var itemId=_ref.itemId;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var AddToCart=function AddToCart(){setLoading(true);addItemToCart(itemId).then(function(){return message.success(\"Successfully add item\");}).catch(function(err){return message.error(err.message);}).finally(function(){setLoading(false);});};return/*#__PURE__*/_jsx(Tooltip,{title:\"Add to shopping cart\",children:/*#__PURE__*/_jsx(Button,{loading:loading,type:\"primary\",icon:/*#__PURE__*/_jsx(PlusOutlined,{}),onClick:AddToCart})});};var FoodList=function FoodList(){var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),foodData=_useState4[0],setFoodData=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),curRest=_useState6[0],setCurRest=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),restaurants=_useState8[0],setRestaurants=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),loading=_useState10[0],setLoading=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),loadingRest=_useState12[0],setLoadingRest=_useState12[1];useEffect(function(){setLoadingRest(true);getRestaurants().then(function(data){setRestaurants(data);}).catch(function(err){message.error(err.message);}).finally(function(){setLoadingRest(false);});},[]);useEffect(function(){if(curRest){setLoading(true);getMenus(curRest).then(function(data){setFoodData(data);}).catch(function(err){message.error(err.message);}).finally(function(){setLoading(false);});}},[curRest]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Select,{value:curRest,onSelect:function onSelect(value){return setCurRest(value);},placeholder:\"Select a restaurant\",loading:loadingRest,style:{width:300},onChange:function onChange(){},children:restaurants.map(function(item){return/*#__PURE__*/_jsx(Option,{value:item.id,children:item.name});})}),curRest&&/*#__PURE__*/_jsx(List,{style:{marginTop:20},loading:loading,grid:{gutter:16,xs:1,sm:2,md:4,lg:4,xl:3,xxl:3},dataSource:foodData,renderItem:function renderItem(item){return/*#__PURE__*/_jsx(List.Item,{children:/*#__PURE__*/_jsxs(Card,{title:item.name,extra:/*#__PURE__*/_jsx(AddToCartButton,{itemId:item.id}),children:[/*#__PURE__*/_jsx(\"img\",{src:item.imageUrl,alt:item.name,style:{height:340,width:\"100%\",display:\"block\"}}),\"Price: \".concat(item.price)]})});}})]});};export default FoodList;","map":{"version":3,"sources":["/Users/huyuxuan/Desktop/laioffer/doordash-app/src/components/FoodList.js"],"names":["Button","Card","List","message","Select","Tooltip","useEffect","useState","addItemToCart","getMenus","getRestaurants","PlusOutlined","Option","AddToCartButton","itemId","loading","setLoading","AddToCart","then","success","catch","err","error","finally","FoodList","foodData","setFoodData","curRest","setCurRest","restaurants","setRestaurants","loadingRest","setLoadingRest","data","value","width","map","item","id","name","marginTop","gutter","xs","sm","md","lg","xl","xxl","imageUrl","height","display","price"],"mappings":"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","sourcesContent":["import { Button, Card, List, message, Select, Tooltip } from \"antd\";\nimport { useEffect, useState } from \"react\";\nimport { addItemToCart, getMenus, getRestaurants } from \"../utils\";\nimport { PlusOutlined } from \"@ant-design/icons\";\n\nconst { Option } = Select;\n\nconst AddToCartButton = ({ itemId }) => {\n  const [loading, setLoading] = useState(false);\n\n  const AddToCart = () => {\n    setLoading(true);\n    addItemToCart(itemId)\n      .then(() => message.success(`Successfully add item`))\n      .catch((err) => message.error(err.message))\n      .finally(() => {\n        setLoading(false);\n      });\n  };\n\n  return (\n    <Tooltip title=\"Add to shopping cart\">\n      <Button\n        loading={loading}\n        type=\"primary\"\n        icon={<PlusOutlined />}\n        onClick={AddToCart}\n      />\n    </Tooltip>\n  );\n};\n\nconst FoodList = () => {\n  const [foodData, setFoodData] = useState([]);\n  const [curRest, setCurRest] = useState();\n  const [restaurants, setRestaurants] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [loadingRest, setLoadingRest] = useState(false);\n\n  useEffect(() => {\n    setLoadingRest(true);\n    getRestaurants()\n      .then((data) => {\n        setRestaurants(data);\n      })\n      .catch((err) => {\n        message.error(err.message);\n      })\n      .finally(() => {\n        setLoadingRest(false);\n      });\n  }, []);\n\n  useEffect(() => {\n    if (curRest) {\n      setLoading(true);\n      getMenus(curRest)\n        .then((data) => {\n          setFoodData(data);\n        })\n        .catch((err) => {\n          message.error(err.message);\n        })\n        .finally(() => {\n          setLoading(false);\n        });\n    }\n  }, [curRest]);\n\n  return (\n    <>\n      <Select\n        value={curRest}\n        onSelect={(value) => setCurRest(value)}\n        placeholder=\"Select a restaurant\"\n        loading={loadingRest}\n        style={{ width: 300 }}\n        onChange={() => {}}\n      >\n        {restaurants.map((item) => {\n          return <Option value={item.id}>{item.name}</Option>;\n        })}\n      </Select>\n      {curRest && (\n        <List\n          style={{ marginTop: 20 }}\n          loading={loading}\n          grid={{\n            gutter: 16,\n            xs: 1,\n            sm: 2,\n            md: 4,\n            lg: 4,\n            xl: 3,\n            xxl: 3,\n          }}\n          dataSource={foodData}\n          renderItem={(item) => (\n            <List.Item>\n              <Card\n                title={item.name}\n                extra={<AddToCartButton itemId={item.id} />}\n              >\n                <img\n                  src={item.imageUrl}\n                  alt={item.name}\n                  style={{ height: 340, width: \"100%\", display: \"block\" }}\n                />\n                {`Price: ${item.price}`}\n              </Card>\n            </List.Item>\n          )}\n        />\n      )}\n    </>\n  );\n};\n\nexport default FoodList;"]},"metadata":{},"sourceType":"module"}